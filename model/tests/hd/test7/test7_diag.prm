# DIAGNOSTICS TEST
# Test 7 of model shoc: 50 by 27 by 24 closed basin with sloping 
# bottom (southern hemisphere) is forced with wind stress in the 
# e1 ditrection having positive curl. Anti-cyclonic circulation
# is set up due to topographically induced conservation of potential
# vorticity, where the centre of the gyre biased to the west.
# Conservation of potential vorticity theory (e.g. Herzfeld & Tomczak 
# (1999), Aust. J. Marine Freshw. Res., 50, 613 - 627.) predicts that :
# A poitive gradient of f/H (f < 0) results in an eastward biased gyre.
# A poitive gradient of f/H (f > 0) results in an westward biased gyre.
# Constant depth (BATHYMAX = 50) results in a gyre with no bias.
# A change in sign of the wind curl (WIND_SPEED_SCALE = -1.0) results
# in a cyclonic gyre with no change to the bias.
   
CODEHEADER           SHOC default version : leapfrog
PARAMETERHEADER      Test 7 - diagnostics
DESCRIPTION          SHOC test 7
NAME                 SHOC test7 grid
PROJECTION           proj=merc lon_0=83
TIMEUNIT             seconds since 2000-01-01 00:00:00 +08
OUTPUT_TIMEUNIT      days since 2000-01-01 00:00:00 +08
LENUNIT              metre
START_TIME           0 days
STOP_TIME            10 days

INPUT_FILE           in7.nc

# Output files
OutputFiles 1

file0.name           out7_d.nc
file0.filetype       simple
file0.tstart         0 days
file0.tinc           0.5 days
file0.tstop          10 days
file0.bytespervalue  4
file0.vars           ALL

# Flags
WINDOWS              1
NONLINEAR            YES
CALCDENS             YES
HEATFLUX             NONE
SALTFLUX             NONE
2D-MODE              NO
STABILITY            SUB-STEP-NOSURF
RAMPSTART            0 days
RAMPEND              1 days
MERGE_THIN           YES
HMIN                 0.1400
SLIP                 1.0   
SIGMA                NO

# Time steps
DT                   1200.00  seconds
IRATIO               12
TRATIO               1

# Advection
MOM_SCHEME           ORDER2
TRA_SCHEME           VANLEER
ULTIMATE             NO

# Horizontal mixing
U1VH                 800.0
U2VH                 800.0
U1KH                 -100.0
U2KH                 -100.0
SMAGORINSKY          0.1000

# Vertical mixing
MIXING_SCHEME        k-e
VZ0                  1.0000e-04
KZ0                  1.0000e-05
ZS                   1.0000

# Bottom friction
QBFC                 0.0030
UF                   0.0001
Z0                   0.0012

# Constants
G                    9.8100
SPECHEAT             3990.0
AIRDENS              1.2250
AMBIENT_AIR_PRESSURE 100800.0000
CORIOLIS             1350
-1.0e-4

# Diagnostics
CFL                  PASSIVE|WVEL
MIX_LAYER            TKE_MIX
MEAN                 VEL2D VEL3D WIND TENDENCY FLUX
MEAN_DT		     0.5 day
VORTICITY            ABSOLUTE RELATIVE POTENTIAL TENDENCY
NUMBERS	             ALL_NUMBERS
TOTALS               YES source
ALERT      	     PASSIVE
ALERT_DT             1 hour
MOM_TEND	     YES
CALC_FLUXES          temp
CALC_PERCS	     temp
FLUSHING_TR          YES
FLUSHIG_DT           1 hour
FLUSHING_PTS	     6
20 11
21 11
22 11
20 12
21 12
22 12
STERIC_HEIGHT        -50.00  

# Grid
GRIDTYPE             GEOGRAPHIC_RECTANGULAR
NCE1                 50
NCE2                 27
X00                  0.00000 
Y00                  0.00000 
DX                   25000.000
DY                   25000.000
ROTATION             0.0   

# Vertical grid spacing
LAYERFACES           24
-110.00 
-105.00 
-100.00 
-95.00  
-90.00  
-85.00  
-80.00  
-75.00  
-70.00  
-65.00  
-60.00  
-55.00  
-50.00  
-45.00  
-40.00  
-35.00  
-30.00  
-25.00  
-20.00  
-15.00  
-10.00  
-5.00   
-2.00   
0.00    

# Bathymetry limits
BATHYMIN             50.0  
BATHYMAX             120.0 
ETAMAX               10.0  
MIN_CELL_THICKNESS   25%

# Tracers
NTRACERS             4

TRACER0.name         salt
TRACER0.long_name    Salinity
TRACER0.units        PSU
TRACER0.fill_value   35.0  
TRACER0.valid_range  0.0    40.0  
TRACER0.advect       1
TRACER0.diffuse      1
TRACER0.diagn        0
TRACER0.data         profile.nc

TRACER1.name         temp
TRACER1.long_name    Temperature
TRACER1.units        degrees C
TRACER1.fill_value   20.0  
TRACER1.valid_range  0.0    40.0  
TRACER1.advect       1
TRACER1.diffuse      1
TRACER1.diagn        0
TRACER1.data         profile.nc

TRACER2.name         source
TRACER2.long_name    Passive source
TRACER2.units        %
TRACER2.fill_value   0.0 
TRACER2.valid_range  0.0    100.0  
TRACER2.advect       1
TRACER2.diffuse      1
TRACER2.diagn        0

TRACER3.name         lscale
TRACER3.long_name    Mixing length scale
TRACER3.units        m
TRACER3.fill_value   0.0  
TRACER3.valid_range  0.0    1e5  
TRACER3.advect       0
TRACER3.diffuse      0
TRACER3.diagn        0

# Forcing
WIND_TS              wind_test7.nc
WIND_INPUT_DT        10   days
WIND_SPEED_SCALE     1.0   
DRAG_LAW_V0          10.0  
DRAG_LAW_V1          26.0  
DRAG_LAW_CD0         0.00114 
DRAG_LAW_CD1         0.00218 

# Time series
TSPOINTS             1

TS0.name              loc_d.ts
TS0.location          612500.0 62500.0 0 	#(24,2,22)
TS0.dt                3600 seconds
TS0.reference         msl

# Point sources/sinks
npointss 1

pss0.name 	source
pss0.location 	612500.0 312500.0 -77 0 	#(24,12,22)
pss0.data 	source.ts


# Uncomment to use a point source for particle release.
#PT_InputFile		part_10000.nc

# Uncomment to use an initial release distribution.
PT_InputFile		part_poly.nc

PT_InputRecord		0 
PT_OutputFile		out_pt
PT_StartTime		0 days
PT_StopTime		10 days
PT_OutputStep		1 day
PT_TimeStep		10 minutes
PT_ResetStep		400 days
PT_KH			1.0
PT_StickyBoundary	FALSE
PT_KZ_MULT		1.0 
PT_Mass			1.0
PT_AgeLimit             10 days
PT_SizeLimit            1e-5
PT_NSOURCE			0      # Set to 1 for source
PT_SOURCE0.Rate			0.000555555556 # (s-1) : 2 part/hr
PT_SOURCE0.Colourbit		2
PT_SOURCE0.Size			1e-5           # (m)
PT_SOURCE0.Decay 		6 hours
PT_SOURCE0.Dens  		1030           # (kg/m3)
PT_SOURCE0.Svel 		-1.157e-4      # (ms-1) : 10 m/day 
PT_SOURCE0.StartLocation	612500.0 312500.0 0
PT_SOURCE0.EndLocation		612500.0 312500.0 -77

# Open boundaries
NBOUNDARIES           0

# Bathymetry
BATHY    1350
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
  50.000
  50.000
  50.000
  50.000
  50.000
  50.000
  50.000
  50.000
  50.000
  50.000
  50.000
  50.000
  50.000
  50.000
  50.000
  50.000
  50.000
  50.000
  50.000
  50.000
  50.000
  50.000
  50.000
  50.000
  50.000
  50.000
  50.000
  50.000
  50.000
  50.000
  50.000
  50.000
  50.000
  50.000
  50.000
  50.000
  50.000
  50.000
  50.000
  50.000
  50.000
  50.000
  50.000
  50.000
  50.000
  50.000
  50.000
  50.000
 -99.000
 -99.000
  52.500
  52.500
  52.500
  52.500
  52.500
  52.500
  52.500
  52.500
  52.500
  52.500
  52.500
  52.500
  52.500
  52.500
  52.500
  52.500
  52.500
  52.500
  52.500
  52.500
  52.500
  52.500
  52.500
  52.500
  52.500
  52.500
  52.500
  52.500
  52.500
  52.500
  52.500
  52.500
  52.500
  52.500
  52.500
  52.500
  52.500
  52.500
  52.500
  52.500
  52.500
  52.500
  52.500
  52.500
  52.500
  52.500
  52.500
  52.500
 -99.000
 -99.000
  55.000
  55.000
  55.000
  55.000
  55.000
  55.000
  55.000
  55.000
  55.000
  55.000
  55.000
  55.000
  55.000
  55.000
  55.000
  55.000
  55.000
  55.000
  55.000
  55.000
  55.000
  55.000
  55.000
  55.000
  55.000
  55.000
  55.000
  55.000
  55.000
  55.000
  55.000
  55.000
  55.000
  55.000
  55.000
  55.000
  55.000
  55.000
  55.000
  55.000
  55.000
  55.000
  55.000
  55.000
  55.000
  55.000
  55.000
  55.000
 -99.000
 -99.000
  57.500
  57.500
  57.500
  57.500
  57.500
  57.500
  57.500
  57.500
  57.500
  57.500
  57.500
  57.500
  57.500
  57.500
  57.500
  57.500
  57.500
  57.500
  57.500
  57.500
  57.500
  57.500
  57.500
  57.500
  57.500
  57.500
  57.500
  57.500
  57.500
  57.500
  57.500
  57.500
  57.500
  57.500
  57.500
  57.500
  57.500
  57.500
  57.500
  57.500
  57.500
  57.500
  57.500
  57.500
  57.500
  57.500
  57.500
  57.500
 -99.000
 -99.000
  60.000
  60.000
  60.000
  60.000
  60.000
  60.000
  60.000
  60.000
  60.000
  60.000
  60.000
  60.000
  60.000
  60.000
  60.000
  60.000
  60.000
  60.000
  60.000
  60.000
  60.000
  60.000
  60.000
  60.000
  60.000
  60.000
  60.000
  60.000
  60.000
  60.000
  60.000
  60.000
  60.000
  60.000
  60.000
  60.000
  60.000
  60.000
  60.000
  60.000
  60.000
  60.000
  60.000
  60.000
  60.000
  60.000
  60.000
  60.000
 -99.000
 -99.000
  62.500
  62.500
  62.500
  62.500
  62.500
  62.500
  62.500
  62.500
  62.500
  62.500
  62.500
  62.500
  62.500
  62.500
  62.500
  62.500
  62.500
  62.500
  62.500
  62.500
  62.500
  62.500
  62.500
  62.500
  62.500
  62.500
  62.500
  62.500
  62.500
  62.500
  62.500
  62.500
  62.500
  62.500
  62.500
  62.500
  62.500
  62.500
  62.500
  62.500
  62.500
  62.500
  62.500
  62.500
  62.500
  62.500
  62.500
  62.500
 -99.000
 -99.000
  65.000
  65.000
  65.000
  65.000
  65.000
  65.000
  65.000
  65.000
  65.000
  65.000
  65.000
  65.000
  65.000
  65.000
  65.000
  65.000
  65.000
  65.000
  65.000
  65.000
  65.000
  65.000
  65.000
  65.000
  65.000
  65.000
  65.000
  65.000
  65.000
  65.000
  65.000
  65.000
  65.000
  65.000
  65.000
  65.000
  65.000
  65.000
  65.000
  65.000
  65.000
  65.000
  65.000
  65.000
  65.000
  65.000
  65.000
  65.000
 -99.000
 -99.000
  67.500
  67.500
  67.500
  67.500
  67.500
  67.500
  67.500
  67.500
  67.500
  67.500
  67.500
  67.500
  67.500
  67.500
  67.500
  67.500
  67.500
  67.500
  67.500
  67.500
  67.500
  67.500
  67.500
  67.500
  67.500
  67.500
  67.500
  67.500
  67.500
  67.500
  67.500
  67.500
  67.500
  67.500
  67.500
  67.500
  67.500
  67.500
  67.500
  67.500
  67.500
  67.500
  67.500
  67.500
  67.500
  67.500
  67.500
  67.500
 -99.000
 -99.000
  70.000
  70.000
  70.000
  70.000
  70.000
  70.000
  70.000
  70.000
  70.000
  70.000
  70.000
  70.000
  70.000
  70.000
  70.000
  70.000
  70.000
  70.000
  70.000
  70.000
  70.000
  70.000
  70.000
  70.000
  70.000
  70.000
  70.000
  70.000
  70.000
  70.000
  70.000
  70.000
  70.000
  70.000
  70.000
  70.000
  70.000
  70.000
  70.000
  70.000
  70.000
  70.000
  70.000
  70.000
  70.000
  70.000
  70.000
  70.000
 -99.000
 -99.000
  72.500
  72.500
  72.500
  72.500
  72.500
  72.500
  72.500
  72.500
  72.500
  72.500
  72.500
  72.500
  72.500
  72.500
  72.500
  72.500
  72.500
  72.500
  72.500
  72.500
  72.500
  72.500
  72.500
  72.500
  72.500
  72.500
  72.500
  72.500
  72.500
  72.500
  72.500
  72.500
  72.500
  72.500
  72.500
  72.500
  72.500
  72.500
  72.500
  72.500
  72.500
  72.500
  72.500
  72.500
  72.500
  72.500
  72.500
  72.500
 -99.000
 -99.000
  75.000
  75.000
  75.000
  75.000
  75.000
  75.000
  75.000
  75.000
  75.000
  75.000
  75.000
  75.000
  75.000
  75.000
  75.000
  75.000
  75.000
  75.000
  75.000
  75.000
  75.000
  75.000
  75.000
  75.000
  75.000
  75.000
  75.000
  75.000
  75.000
  75.000
  75.000
  75.000
  75.000
  75.000
  75.000
  75.000
  75.000
  75.000
  75.000
  75.000
  75.000
  75.000
  75.000
  75.000
  75.000
  75.000
  75.000
  75.000
 -99.000
 -99.000
  77.500
  77.500
  77.500
  77.500
  77.500
  77.500
  77.500
  77.500
  77.500
  77.500
  77.500
  77.500
  77.500
  77.500
  77.500
  77.500
  77.500
  77.500
  77.500
  77.500
  77.500
  77.500
  77.500
  77.500
  77.500
  77.500
  77.500
  77.500
  77.500
  77.500
  77.500
  77.500
  77.500
  77.500
  77.500
  77.500
  77.500
  77.500
  77.500
  77.500
  77.500
  77.500
  77.500
  77.500
  77.500
  77.500
  77.500
  77.500
 -99.000
 -99.000
  80.000
  80.000
  80.000
  80.000
  80.000
  80.000
  80.000
  80.000
  80.000
  80.000
  80.000
  80.000
  80.000
  80.000
  80.000
  80.000
  80.000
  80.000
  80.000
  80.000
  80.000
  80.000
  80.000
  80.000
  80.000
  80.000
  80.000
  80.000
  80.000
  80.000
  80.000
  80.000
  80.000
  80.000
  80.000
  80.000
  80.000
  80.000
  80.000
  80.000
  80.000
  80.000
  80.000
  80.000
  80.000
  80.000
  80.000
  80.000
 -99.000
 -99.000
  82.500
  82.500
  82.500
  82.500
  82.500
  82.500
  82.500
  82.500
  82.500
  82.500
  82.500
  82.500
  82.500
  82.500
  82.500
  82.500
  82.500
  82.500
  82.500
  82.500
  82.500
  82.500
  82.500
  82.500
  82.500
  82.500
  82.500
  82.500
  82.500
  82.500
  82.500
  82.500
  82.500
  82.500
  82.500
  82.500
  82.500
  82.500
  82.500
  82.500
  82.500
  82.500
  82.500
  82.500
  82.500
  82.500
  82.500
  82.500
 -99.000
 -99.000
  85.000
  85.000
  85.000
  85.000
  85.000
  85.000
  85.000
  85.000
  85.000
  85.000
  85.000
  85.000
  85.000
  85.000
  85.000
  85.000
  85.000
  85.000
  85.000
  85.000
  85.000
  85.000
  85.000
  85.000
  85.000
  85.000
  85.000
  85.000
  85.000
  85.000
  85.000
  85.000
  85.000
  85.000
  85.000
  85.000
  85.000
  85.000
  85.000
  85.000
  85.000
  85.000
  85.000
  85.000
  85.000
  85.000
  85.000
  85.000
 -99.000
 -99.000
  87.500
  87.500
  87.500
  87.500
  87.500
  87.500
  87.500
  87.500
  87.500
  87.500
  87.500
  87.500
  87.500
  87.500
  87.500
  87.500
  87.500
  87.500
  87.500
  87.500
  87.500
  87.500
  87.500
  87.500
  87.500
  87.500
  87.500
  87.500
  87.500
  87.500
  87.500
  87.500
  87.500
  87.500
  87.500
  87.500
  87.500
  87.500
  87.500
  87.500
  87.500
  87.500
  87.500
  87.500
  87.500
  87.500
  87.500
  87.500
 -99.000
 -99.000
  90.000
  90.000
  90.000
  90.000
  90.000
  90.000
  90.000
  90.000
  90.000
  90.000
  90.000
  90.000
  90.000
  90.000
  90.000
  90.000
  90.000
  90.000
  90.000
  90.000
  90.000
  90.000
  90.000
  90.000
  90.000
  90.000
  90.000
  90.000
  90.000
  90.000
  90.000
  90.000
  90.000
  90.000
  90.000
  90.000
  90.000
  90.000
  90.000
  90.000
  90.000
  90.000
  90.000
  90.000
  90.000
  90.000
  90.000
  90.000
 -99.000
 -99.000
  92.500
  92.500
  92.500
  92.500
  92.500
  92.500
  92.500
  92.500
  92.500
  92.500
  92.500
  92.500
  92.500
  92.500
  92.500
  92.500
  92.500
  92.500
  92.500
  92.500
  92.500
  92.500
  92.500
  92.500
  92.500
  92.500
  92.500
  92.500
  92.500
  92.500
  92.500
  92.500
  92.500
  92.500
  92.500
  92.500
  92.500
  92.500
  92.500
  92.500
  92.500
  92.500
  92.500
  92.500
  92.500
  92.500
  92.500
  92.500
 -99.000
 -99.000
  95.000
  95.000
  95.000
  95.000
  95.000
  95.000
  95.000
  95.000
  95.000
  95.000
  95.000
  95.000
  95.000
  95.000
  95.000
  95.000
  95.000
  95.000
  95.000
  95.000
  95.000
  95.000
  95.000
  95.000
  95.000
  95.000
  95.000
  95.000
  95.000
  95.000
  95.000
  95.000
  95.000
  95.000
  95.000
  95.000
  95.000
  95.000
  95.000
  95.000
  95.000
  95.000
  95.000
  95.000
  95.000
  95.000
  95.000
  95.000
 -99.000
 -99.000
  97.500
  97.500
  97.500
  97.500
  97.500
  97.500
  97.500
  97.500
  97.500
  97.500
  97.500
  97.500
  97.500
  97.500
  97.500
  97.500
  97.500
  97.500
  97.500
  97.500
  97.500
  97.500
  97.500
  97.500
  97.500
  97.500
  97.500
  97.500
  97.500
  97.500
  97.500
  97.500
  97.500
  97.500
  97.500
  97.500
  97.500
  97.500
  97.500
  97.500
  97.500
  97.500
  97.500
  97.500
  97.500
  97.500
  97.500
  97.500
 -99.000
 -99.000
 100.000
 100.000
 100.000
 100.000
 100.000
 100.000
 100.000
 100.000
 100.000
 100.000
 100.000
 100.000
 100.000
 100.000
 100.000
 100.000
 100.000
 100.000
 100.000
 100.000
 100.000
 100.000
 100.000
 100.000
 100.000
 100.000
 100.000
 100.000
 100.000
 100.000
 100.000
 100.000
 100.000
 100.000
 100.000
 100.000
 100.000
 100.000
 100.000
 100.000
 100.000
 100.000
 100.000
 100.000
 100.000
 100.000
 100.000
 100.000
 -99.000
 -99.000
 102.500
 102.500
 102.500
 102.500
 102.500
 102.500
 102.500
 102.500
 102.500
 102.500
 102.500
 102.500
 102.500
 102.500
 102.500
 102.500
 102.500
 102.500
 102.500
 102.500
 102.500
 102.500
 102.500
 102.500
 102.500
 102.500
 102.500
 102.500
 102.500
 102.500
 102.500
 102.500
 102.500
 102.500
 102.500
 102.500
 102.500
 102.500
 102.500
 102.500
 102.500
 102.500
 102.500
 102.500
 102.500
 102.500
 102.500
 102.500
 -99.000
 -99.000
 105.000
 105.000
 105.000
 105.000
 105.000
 105.000
 105.000
 105.000
 105.000
 105.000
 105.000
 105.000
 105.000
 105.000
 105.000
 105.000
 105.000
 105.000
 105.000
 105.000
 105.000
 105.000
 105.000
 105.000
 105.000
 105.000
 105.000
 105.000
 105.000
 105.000
 105.000
 105.000
 105.000
 105.000
 105.000
 105.000
 105.000
 105.000
 105.000
 105.000
 105.000
 105.000
 105.000
 105.000
 105.000
 105.000
 105.000
 105.000
 -99.000
 -99.000
 107.500
 107.500
 107.500
 107.500
 107.500
 107.500
 107.500
 107.500
 107.500
 107.500
 107.500
 107.500
 107.500
 107.500
 107.500
 107.500
 107.500
 107.500
 107.500
 107.500
 107.500
 107.500
 107.500
 107.500
 107.500
 107.500
 107.500
 107.500
 107.500
 107.500
 107.500
 107.500
 107.500
 107.500
 107.500
 107.500
 107.500
 107.500
 107.500
 107.500
 107.500
 107.500
 107.500
 107.500
 107.500
 107.500
 107.500
 107.500
 -99.000
 -99.000
 110.000
 110.000
 110.000
 110.000
 110.000
 110.000
 110.000
 110.000
 110.000
 110.000
 110.000
 110.000
 110.000
 110.000
 110.000
 110.000
 110.000
 110.000
 110.000
 110.000
 110.000
 110.000
 110.000
 110.000
 110.000
 110.000
 110.000
 110.000
 110.000
 110.000
 110.000
 110.000
 110.000
 110.000
 110.000
 110.000
 110.000
 110.000
 110.000
 110.000
 110.000
 110.000
 110.000
 110.000
 110.000
 110.000
 110.000
 110.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000
 -99.000

