# Test 3D model: idealised estuary; advanced coinfiguration of parameters
CODEHEADER           SHOC default version
PARAMETERHEADER	     Test 1 - no forcing
DESCRIPTION          SHOC test 1
NAME                 SHOC test 1 grid
TIMEUNIT             seconds since 1990-01-01 00:00:00 +10
OUTPUT_TIMEUNIT      seconds since 1990-01-01 00:00:00 +10
LENUNIT              metre
START_TIME           0.0 seconds
#STOP_TIME            10 days
STOP_TIME            20 days
#STOP_TIME             30 days

INPUT_FILE           inputs/in_test.nc

TRANS_DATA            trans.mnc(u1=u1mean)(u2=u2mean)(w=wmean)(Kz=Kzmean)(u1vm=u1vmean)(u2vm=u2vmean)
TRANS_MODE            SP_FFSL
FILL_METHOD           NONE
TRA_SCHEME            FFSL
STABILITY             SUB-STEP-NOSURF
MERGE_THIN            YES
CONSERVATION          ETA W
TRANS_OMP_NUM_THREADS 1

DT                   30 mins
CFL                  PASSIVE
HMIN                 0.0140
Z0                   0.0001

# Output files
OutputFiles          1

file0.name           tran_outputs/out_all.nc
file0.filetype       standard
file0.tinc           3600 seconds
file0.bytespervalue  4
file0.vars           ALL

file1.name           tran_outputs/out_srf.nc
file1.filetype       standard
file1.tinc           3600.0 seconds
file1.bytespervalue  4
file1.vars           ALL

#TRACERS
NTRACERS             13

### DISSOLVED

TRACER0.name            salt
TRACER0.long_name       Salinity
TRACER0.units           PSU
TRACER0.fill_value      35.0
TRACER0.valid_range     0.0    40.0
TRACER0.fill_value_sed  35.0
TRACER0.valid_range_sed 0.0    40.0
TRACER0.advect          0
TRACER0.diffuse         0
TRACER0.diagn           0
TRACER0.partic          0
TRACER0.dissol          1
TRACER0.type             WC3D  SED  SEDIMENT  PROGNOSTIC

TRACER1.name            temp
TRACER1.long_name       Temperature
TRACER1.units           degrees C
TRACER1.fill_value      20.0
TRACER1.valid_range     0.0    40.0
TRACER1.fill_value_sed  20.0
TRACER1.valid_range_sed 0.0    40.0
TRACER1.advect          0
TRACER1.diffuse         0
TRACER1.diagn           0
TRACER1.partic          0
TRACER1.dissol          1
TRACER1.type             WC3D  SED  SEDIMENT  PROGNOSTIC

TRACER2.name            passive
TRACER2.long_name       Passive tracer
TRACER2.units           kg m-3
TRACER2.fill_value      0.0
TRACER2.valid_range     0.00e+00 1.00e+35
TRACER2.fill_value_sed  100.0
TRACER2.valid_range_sed 0.00e+00 1.00e+35
TRACER2.advect          1
TRACER2.diffuse         1
TRACER2.diagn           0
TRACER2.partic          0
TRACER2.dissol          1
TRACER2.type             WC3D  SED  SEDIMENT  PROGNOSTIC

### PARTICULATE

TRACER3.name            Gravel
TRACER3.long_name       Gravel
TRACER3.units           kg m-3
TRACER3.fill_value      0.00e+00
TRACER3.valid_range     0.00e+00 2650
TRACER3.fill_value_sed  2.00e+02
TRACER3.valid_range_sed 0.00e+00 2650
TRACER3.advect          0
TRACER3.diffuse         0
TRACER3.diagn           0
TRACER3.partic          1
TRACER3.dissol          0
TRACER3.type             WC3D  SED  SEDIMENT  PROGNOSTIC
TRACER3.psize           2.50e-02
TRACER3.b_dens          2.65e+03
TRACER3.i_conc          1.0e+03
TRACER3.svel            -1.0
TRACER3.cohesive        0
TRACER3.calcvol         1
TRACER3.floc            0
TRACER3.resuspend       0
TRACER3.deposit         1

TRACER4.name            Sand
TRACER4.long_name       Sand
TRACER4.units           kg m-3
TRACER4.fill_value      0.00e+00
TRACER4.valid_range     0.00e+00 2650
TRACER4.fill_value_sed  5.00e+02
TRACER4.valid_range_sed 0.00e+00 2650
TRACER4.advect          0
TRACER4.diffuse         0
TRACER4.diagn           0
TRACER4.partic          1
TRACER4.dissol          0
TRACER4.type             WC3D  SED  SEDIMENT  PROGNOSTIC
TRACER4.psize           2.50e-04
TRACER4.b_dens          2.65e+03
TRACER4.i_conc          1.0e+03
TRACER4.svel            -0.002000
TRACER4.cohesive        0
TRACER4.calcvol         1
TRACER4.floc            0
TRACER4.resuspend       0
TRACER4.deposit         1

TRACER5.name            Mud
TRACER5.long_name       Mud
TRACER5.units           kg m-3
TRACER5.fill_value      0.00e+00
TRACER5.valid_range     0.00e+00 2650
TRACER5.fill_value_sed  5.00e+02
TRACER5.valid_range_sed 0.00e+00 2650
TRACER5.advect          1
TRACER5.diffuse         1
TRACER5.diagn           0
TRACER5.partic          1
TRACER5.dissol          0
TRACER5.type             WC3D  SED  SEDIMENT  PROGNOSTIC
TRACER5.psize           2.50e-05
TRACER5.b_dens          2.65e+03
TRACER5.i_conc          1.0e+03
TRACER5.svel            -0.000200
TRACER5.cohesive        1
TRACER5.calcvol         1
TRACER5.floc            1
TRACER5.resuspend       1
TRACER5.deposit         1

TRACER6.name            FineSed
TRACER6.long_name       FineSed
TRACER6.units           kg m-3
TRACER6.fill_value      0.00e+00
TRACER6.valid_range     0.00e+00 1.00e+35
TRACER6.fill_value_sed  0.00e+00
TRACER6.valid_range_sed 0.00e+00 1.00e+35
TRACER6.advect          1
TRACER6.diffuse         1
TRACER6.diagn           0
TRACER6.partic          1
TRACER6.dissol          0
TRACER6.type             WC3D  SED  SEDIMENT  PROGNOSTIC
TRACER6.psize           2.50e-04
TRACER6.b_dens          2.65e+03
TRACER6.i_conc          1.0e+03
TRACER6.svel            -0.000200
TRACER6.cohesive        1
TRACER6.calcvol         1
TRACER6.floc            0
TRACER6.resuspend       1
TRACER6.deposit         1

TRACER7.name            Dust
TRACER7.long_name       Dust
TRACER7.units           kg m-3
TRACER7.fill_value      2.0e-4
TRACER7.valid_range     0.00e+00 1.00e+35
TRACER7.fill_value_sed  0.00e+00
TRACER7.valid_range_sed 0.00e+00 1.00e+35
TRACER7.advect          1
TRACER7.diffuse         1
TRACER7.diagn           0
TRACER7.partic          1
TRACER7.dissol          0
TRACER7.type             WC3D  SED  SEDIMENT  PROGNOSTIC
TRACER7.psize           2.50e-04
TRACER7.b_dens          2.65e+03
TRACER7.i_conc          0.90e+03
TRACER7.svel            -0.7e-5
TRACER7.cohesive        1
TRACER7.calcvol         1
TRACER7.floc            0
TRACER7.resuspend       1
TRACER7.deposit         1

### DIAGNOSTIC

TRACER8.name            porosity
TRACER8.long_name       Sediment porosity
TRACER8.type             WC3D  SED  SEDIMENT DIAGNOSTIC
TRACER8.units           nondim
TRACER8.fill_value_wc   0.99
TRACER8.fill_value_sed  0.5
TRACER8.valid_range_wc  0 1
TRACER8.valid_range_sed 0 1
TRACER8.diagn           1

TRACER9.name            tss
TRACER9.long_name       tss
TRACER9.units           kg m-3
TRACER9.fill_value      0.00e+00
TRACER9.valid_range     -1.00e+35 1.00e+35
TRACER9.fill_value_sed  0.00e+00
TRACER9.valid_range_sed -1.00e+35 1.00e+35
TRACER9.advect          0
TRACER9.diffuse         0
TRACER9.diagn           1
TRACER9.type             WC3D  SED  SEDIMENT DIAGNOSTIC

TRACER10.name            depth_sedi
TRACER10.long_name       depth_sedi
TRACER10.units           m
TRACER10.fill_value      0.00e+00
TRACER10.valid_range     -1.00e+35 1.00e+35
TRACER10.type             WC2D DIAGNOSTIC

TRACER11.name            erdepflux_total_ac
TRACER11.long_name       erdepflux_total_ac
TRACER11.units           kg m-2
TRACER11.fill_value      0.00e+00
TRACER11.valid_range     -1.00e+35 1.00e+35
TRACER11.diagn            0
TRACER11.type             WC2D DIAGNOSTIC

TRACER12.name            ustrcw_skin
TRACER12.long_name       ustrcw_skin
TRACER12.units           m s-1
TRACER12.fill_value      0.00e+00
TRACER12.valid_range     -1.00e+35 1.00e+35
TRACER12.type             WC2D DIAGNOSTIC

# Activate Waves
WAVE_VARS inputs/wavedata-amp.txt
WAVE_VARS_INPUT_DT 1 hour

############################################################################
# Sediments

# Sediment layer thicknesses
NSEDLAYERS 12
0.005
0.005
0.01
0.01
0.01
0.02
0.03
0.04
0.07
0.10
0.20
0.50

VERBOSE_SED     1
MAX_THICK_SED   10.00

# Activate process
# Default: 0
DO_SEDIMENTS    YES

# CRITICAL STRESSES
# Critical shear stress of cohesive bed erosion N m-2
# Modes: CSS0, CSS1, CSS2, CSS3, CSS4
# Default: css_er = 0.2
CSS_ER_MODE       CSS4
CSS_ER            12
0.20
0.30
0.40
0.50
0.70
0.70
0.70
0.70
0.70
0.70
0.70
1.70

CSS_ER_DEPTH 12
10.000
-0.005
-0.01
-0.02
-0.03
-0.04
-0.06
-0.09
-0.13
-0.20
-0.30
-0.50

CSS_SCALE 1.

# Critical shear stress of cohesive sediment deposition N m-2
# Default: CSS_DEP = +inf
#CSS_DEP                1.00e+13

# FLOCCULATION
# Modes: FLOC0, FLOC1, FLOC2, FLOC3
# Default: FLOC0 - no flocculation
# FLOC_MODE       FLOC0
FLOC_MODE        FLOC4
FLOC_PRM1 -3.40e-4
FLOC_PRM2 3


# CONSOLIDATION
CONSOLIDATE     1
FINPOR_SED      0.50
CONSOLRATE      10.00

# RIPPLES
# Bed forms
# Default: 0
CALC_RIPPLES    0
PHYSRIPH        0.0100
PHYSRIPL        0.5000
BIORIPH         0.0000
BIORIPL         0.0300
# Skin roughness
Z0_SKIN         3.000e-05

# Maximum depth for biological activity
MAXBIODEPTH     0.20
# Functional form for bioirrigarion and bioturbation activity
# as a function of depth. Currently can be one of:
#     constant
#     linear
#     parabolic
#     gaussian
# Only the first letter of this parameter is significant
BIOSEDPROFILE   parabolic

# Biological activity (standard animals per square metre?)
BIODENS        30.00

# Diffusion coefficient for bio-irrigation of sediments.
# This value is scaled by the amount of biological
# activity present, and also decreases with depth
# in the sediment according to some
# fixed profile. The value here is the value which
# would apply at zero depth in the sediment.
# Units are m2 s-1 per animal per m2.
BI_DISSOL_KZ    1.00e-09
BI_DISSOL_KZ_I  1.00e-12

# Diffusion coefficient for bio-turbation of sediments.
# This value is scaled by the amount of biological
# activity present, and also decreases with depth
# in the sediment according to some
# fixed profile. The value here is the value which
# would apply at zero depth in the sediment.
# Units are m2 s-1 per animal per m2.
BT_PARTIC_KZ    1.00e-10
BT_PARTIC_KZ_I  1.00e-12

# Smooth vertical profiles
# default is 0
HINDERED_SVEL  1

# scaled resuspension flux
ERFLUX_SCALE 0.95


# Activate Waves
DO_WAVES YES
WAVE_VARS inputs/wavedata-amp.txt
WAVE_VARS_INPUT_DT 1 hour


############################################################################

# Forcing
# Time series
TSPOINTS             0
TS0.name             loc_z.ts
TS0.location         500  500  0
TS0.dt               3600 seconds
TS0.reference        msl

SURFACE    1350
0

# Open boundaries
NBOUNDARIES           2

BOUNDARY0.NAME          offshore
BOUNDARY0.TYPE          u1
BOUNDARY0.BCOND_NOR     NOGRAD
BOUNDARY0.BCOND_TAN     CLAMPD
BOUNDARY0.BCOND_TRA_ALL STATIS
BOUNDARY0.BCOND_TRA0    CUSTOM
BOUNDARY0.CUSTOM.salt   35
BOUNDARY0.CUSTOM.MA_N   0
BOUNDARY0.CUSTOM.SG_N   0
BOUNDARY0.BCOND_TRA1    NOGRAD
BOUNDARY0.BCOND_TRA2    FILEIN|UPSTRM
BOUNDARY0.BCOND_TRA3    FILEIN|UPSTRM
BOUNDARY0.BCOND_TRA4    FILEIN|UPSTRM
BOUNDARY0.BCOND_TRA5    FILEIN|UPSTRM
BOUNDARY0.BCOND_TRA6    FILEIN|UPSTRM
BOUNDARY0.BCOND_TRA7    FILEIN|UPSTRM
BOUNDARY0.BCOND_VZ      NOGRAD
BOUNDARY0.BCOND_KZ      NOGRAD
BOUNDARY0.INVERSE_BAROMETER NO
BOUNDARY0.DATA           inputs/bnd_ocean_sedi.ts
BOUNDARY0.RANGE         (49,1)-(49,25)

BOUNDARY1.NAME          river
BOUNDARY1.TYPE          u1
BOUNDARY1.BCOND_ELE     NOTHIN
BOUNDARY1.BCOND_NOR     CUSTOM
BOUNDARY1.BCOND_TAN     CLAMPD
BOUNDARY1.BCOND_TRA_ALL  NOGRAD
BOUNDARY1.BCOND_TRA2    FILEIN|UPSTRM
BOUNDARY1.BCOND_TRA3    FILEIN|UPSTRM
BOUNDARY1.BCOND_TRA4    FILEIN|UPSTRM
BOUNDARY1.BCOND_TRA5    FILEIN|UPSTRM
BOUNDARY1.BCOND_TRA6    FILEIN|UPSTRM
BOUNDARY1.BCOND_TRA7    FILEIN|UPSTRM
BOUNDARY1.UPSTRM_METHOD ADAPTIVE
BOUNDARY1.BCOND_VZ      NOGRAD
BOUNDARY1.BCOND_KZ      NOGRAD
BOUNDARY1.CUSTOM.u1     u1flowbdry
BOUNDARY1.U1_FLOW       inputs/bnd_river_flow.ts
BOUNDARY1.U1_HC         -5.0
BOUNDARY1.INVERSE_BAROMETER NO
BOUNDARY1.DATA                   inputs/bnd_river_sedi.ts
BOUNDARY1.POINTS        3
1 12
1 13
1 14

